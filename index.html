<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TP-Link UI A/B Testing Portal (Fixed)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        /* ================= 引导页样式 ================= */
        :root {
            --bg-color: #F5F7FA;
            --card-bg: #FFFFFF;
            --primary: #007AFF;
            --text-main: #1D1D1F;
            --text-sub: #86868B;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            background-color: var(--bg-color);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* 1. 引导页容器 */
        #landing-view {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            transition: transform 0.4s ease, opacity 0.4s ease;
        }

        .header-title { text-align: center; margin-bottom: 50px; }
        .header-title h1 {
            font-size: 36px; margin: 0 0 10px 0;
            background: linear-gradient(135deg, #00C6FF, #0072FF);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .header-title p { color: var(--text-sub); font-size: 16px; }

        .cards-container { display: flex; gap: 40px; flex-wrap: wrap; justify-content: center; }

        .option-card {
            background: var(--card-bg); width: 320px; border-radius: 24px; padding: 40px 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 2px solid transparent; text-align: center; position: relative; overflow: hidden;
        }

        .option-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 122, 255, 0.15); border-color: rgba(0, 122, 255, 0.3);
        }

        .card-icon {
            width: 80px; height: 80px; background: #F2F7FF; color: var(--primary);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 32px; margin: 0 auto 24px auto;
        }

        .option-card h2 { margin: 0 0 10px 0; color: var(--text-main); }
        .option-card p { color: var(--text-sub); line-height: 1.5; font-size: 14px; margin-bottom: 30px; }
        
        .btn-select {
            display: inline-block; padding: 12px 30px; background: var(--primary);
            color: white; border-radius: 50px; font-weight: 600; font-size: 14px; transition: 0.2s;
        }
        
        /* 2. 预览容器 (Iframe) */
        #preview-view {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 100;
            transform: translateY(100%); /* 默认隐藏在底部 */
            transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        #preview-view.active { transform: translateY(0); }

        iframe { width: 100%; height: 100%; border: none; display: block; }

        /* 3. 悬浮控制栏 */
        .floating-controls {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background: rgba(29, 29, 31, 0.85); backdrop-filter: blur(10px);
            padding: 8px 16px; border-radius: 50px; display: flex; gap: 16px;
            align-items: center; box-shadow: 0 10px 30px rgba(0,0,0,0.25);
            z-index: 200; opacity: 0; pointer-events: none; transition: opacity 0.3s;
        }
        #preview-view.active .floating-controls { opacity: 1; pointer-events: auto; }

        .control-btn {
            color: #fff; background: none; border: none; cursor: pointer; font-size: 14px;
            display: flex; align-items: center; gap: 8px; padding: 8px 12px;
            border-radius: 20px; transition: background 0.2s;
        }
        .control-btn:hover { background: rgba(255,255,255,0.2); }
        .divider { width: 1px; height: 16px; background: rgba(255,255,255,0.2); }

    </style>
</head>
<body>

    <div id="landing-view">
        <div class="header-title">
            <h1>Web UI Interaction Testing</h1>
            <p>Please select a prototype to experience</p>
        </div>

        <div class="cards-container">
            <div class="option-card" onclick="loadScheme('A')">
                <div class="card-icon"><i class="fas fa-layer-group"></i></div>
                <h2>Scheme A</h2>
                <p><strong>Top Navigation Hierarchy</strong><br>Focused on clear categorization and desktop workflow.</p>
                <div class="btn-select">Experience A</div>
            </div>

            <div class="option-card" onclick="loadScheme('B')">
                <div class="card-icon"><i class="fas fa-mobile-alt"></i></div>
                <h2>Scheme B</h2>
                <p><strong>Sidebar & Glassmorphism</strong><br>Modern aesthetic, "Mobile First" responsive design.</p>
                <div class="btn-select">Experience B</div>
            </div>
        </div>
    </div>

    <div id="preview-view">
        <iframe id="demo-frame"></iframe>
        
        <div class="floating-controls">
            <button class="control-btn" onclick="closePreview()">
                <i class="fas fa-times"></i> Exit
            </button>
            <div class="divider"></div>
            <span style="color:rgba(255,255,255,0.6); font-size:12px;">Mode: <span id="current-scheme-name" style="color:#fff; font-weight:bold;">A</span></span>
            <div class="divider"></div>
            <button class="control-btn" onclick="switchScheme()">
                Switch <i class="fas fa-exchange-alt"></i>
            </button>
        </div>
    </div>

    <textarea id="code-a" style="display:none;">
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Scheme A</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        :root { --primary: #007AFF; --bg: #F2F5F9; --sidebar-bg: #fff; --text: #1D1D1F; --text-sub: #86868B; }
        body { font-family: -apple-system, sans-serif; margin: 0; background: var(--bg); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        .header { display: flex; align-items: center; justify-content: space-between; height: 60px; padding: 0 20px; background: rgba(255,255,255,0.95); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .logo { font-weight: 800; font-size: 20px; color: var(--primary); font-style: italic; margin-right: 20px; }
        
        /* Top Nav */
        .l1-nav-bar { display: flex; gap: 5px; overflow-x: auto; flex: 1; }
        .nav-l1-top { padding: 6px 12px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 15px; font-weight: 600; color: var(--text-sub); white-space: nowrap; }
        .nav-l1-top.active { color: var(--primary); background: rgba(0, 122, 255, 0.1); }
        
        /* Layout */
        .container { display: flex; flex: 1; overflow: hidden; position: relative; }
        .sidebar-wrapper { width: 260px; background: var(--sidebar-bg); border-right: 1px solid #eee; overflow-y: auto; transition: transform 0.3s; z-index: 90; }
        .sidebar-hidden { width: 0; border: none; }

        .nav-l2-item { padding: 12px 24px; cursor: pointer; display: flex; justify-content: space-between; color: var(--text); font-size: 14px; font-weight: 500; }
        .nav-l2-item.active { color: var(--primary); background: rgba(0,122,255,0.05); border-left: 3px solid var(--primary); }
        .nav-l3-container { display: none; background: #f9f9f9; }
        .nav-l3-item { padding: 10px 24px 10px 48px; font-size: 13px; color: var(--text-sub); cursor: pointer; }
        
        .main-content { flex: 1; padding: 30px; overflow-y: auto; }
        .content-wrapper { max-width: 1000px; margin: 0 auto; }
        
        /* Content Components */
        .page-title { font-size: 24px; font-weight: 800; margin-bottom: 10px; }
        .card { background: #fff; border-radius: 16px; padding: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); margin-bottom: 20px; }
        
        /* Mobile */
        @media (max-width: 768px) {
            .sidebar-wrapper { position: absolute; top: 0; left: 0; height: 100%; box-shadow: 2px 0 10px rgba(0,0,0,0.1); transform: translateX(-100%); width: 260px; }
            .sidebar-wrapper.visible { transform: translateX(0); }
            .sidebar-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.3); z-index: 80; display: none; }
            .sidebar-overlay.active { display: block; }
            .sidebar-hidden { width: 260px; transform: translateX(-100%); } /* Reset for mobile logic */
        }
    </style>
</head>
<body>
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>
    <header class="header">
        <div style="display:flex; align-items:center; overflow:hidden;">
            <div class="logo">TP-Link</div>
            <div class="l1-nav-bar">
                <div class="nav-l1-top active" onclick="navToL1('Network Map', 'leaf', this)"><i class="fas fa-project-diagram"></i> Map</div>
                <div class="nav-l1-top" onclick="navToL1('WiFi Settings', 'leaf', this)"><i class="fas fa-wifi"></i> WiFi</div>
                <div class="nav-l1-top" onclick="navToL1('HomeShield', 'parent', this)"><i class="fas fa-shield-alt"></i> HomeShield</div>
                <div class="nav-l1-top" onclick="navToL1('Advanced', 'parent', this)"><i class="fas fa-sliders-h"></i> Advanced</div>
            </div>
        </div>
    </header>
    <div class="container">
        <aside class="sidebar-wrapper sidebar-hidden" id="sidebar-wrapper"><nav id="sidebar-nav"></nav></aside>
        <main class="main-content" id="content-area"></main>
    </div>
    <script>
        const NAV_DATA = {
            "HomeShield": { children: { "Security": {type:'leaf'}, "Parental Control": {type:'leaf'} } },
            "Advanced": { children: { 
                "Access Control": {type:'leaf'}, "EasyMesh": {type:'leaf'}, "QoS": {type:'leaf'}, 
                "System": { type: 'parent', children: {"Reboot":{}, "Firmware":{}} } 
            }}
        };

        function navToL1(title, type, el) {
            document.querySelectorAll('.nav-l1-top').forEach(e => e.classList.remove('active'));
            el.classList.add('active');
            const sidebar = document.getElementById('sidebar-wrapper');
            const overlay = document.getElementById('sidebar-overlay');

            if (type === 'parent' && NAV_DATA[title]) {
                if(window.innerWidth > 768) { sidebar.classList.remove('sidebar-hidden'); }
                else { sidebar.classList.add('visible'); overlay.classList.add('active'); }
                renderSidebar(title);
            } else {
                sidebar.classList.add('sidebar-hidden');
                sidebar.classList.remove('visible');
                overlay.classList.remove('active');
                renderContent(title);
            }
        }

        function closeSidebar() {
            document.getElementById('sidebar-wrapper').classList.remove('visible');
            document.getElementById('sidebar-overlay').classList.remove('active');
        }

        function toggleGroup(id, el) {
            const group = document.getElementById('group-'+id);
            group.style.display = group.style.display === 'block' ? 'none' : 'block';
        }

        function renderSidebar(key) {
            const data = NAV_DATA[key];
            if(!data) return;
            let html = '';
            for(let k in data.children) {
                let safeId = k.replace(/\s+/g, '');
                if(data.children[k].type === 'parent') {
                    html += `<div class="nav-l2-item" onclick="toggleGroup('${safeId}', this)">${k} <i class="fas fa-chevron-down"></i></div>
                             <div class="nav-l3-container" id="group-${safeId}">
                                ${Object.keys(data.children[k].children).map(sk => `<div class="nav-l3-item" onclick="renderContent('${sk}')">${sk}</div>`).join('')}
                             </div>`;
                } else {
                    html += `<div class="nav-l2-item" onclick="renderContent('${k}')">${k}</div>`;
                }
            }
            document.getElementById('sidebar-nav').innerHTML = html;
        }

        function renderContent(title) {
            const container = document.getElementById('content-area');
            if(window.innerWidth <= 768) closeSidebar();
            
            if(title === 'Network Map') {
                container.innerHTML = `
                    <div class="content-wrapper">
                        <h1 class="page-title">Network Map</h1>
                        <div style="display:flex; gap:20px; flex-wrap:wrap; justify-content:center;">
                            <div class="card" style="width:200px; text-align:center;">
                                <i class="fas fa-router" style="font-size:40px; color:#007AFF; margin-bottom:10px;"></i>
                                <h3>Router BE800</h3>
                                <div style="color:#28a745; font-weight:bold;">Internet Online</div>
                            </div>
                            <div class="card" style="width:200px; text-align:center;">
                                <i class="fas fa-mobile-alt" style="font-size:30px; color:#555; margin-bottom:10px;"></i>
                                <h4>iPhone 15</h4>
                                <div style="font-size:12px; color:#999;">5GHz • 840Mbps</div>
                            </div>
                        </div>
                    </div>`;
            } else {
                container.innerHTML = `
                    <div class="content-wrapper">
                        <h1 class="page-title">${title}</h1>
                        <div class="card">
                            <h3>Settings</h3>
                            <div style="display:flex; justify-content:space-between; align-items:center; padding:15px 0; border-bottom:1px solid #eee;">
                                <div>Enable Feature</div>
                                <i class="fas fa-toggle-on" style="font-size:24px; color:#007AFF;"></i>
                            </div>
                            <div style="margin-top:20px;">
                                <div style="margin-bottom:5px; font-size:14px; color:#666;">Configuration Value</div>
                                <input type="text" value="Default" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:8px;">
                            </div>
                        </div>
                    </div>`;
            }
        }
        
        // Init
        window.onload = function() { renderContent('Network Map'); }
    </script>
</body>
</html>
    </textarea>

    <textarea id="code-b" style="display:none;">
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Scheme B</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        :root { --primary: #007AFF; --bg: #F2F5F9; --sidebar-bg: #fff; --text: #1D1D1F; --radius: 16px; }
        body { font-family: -apple-system, sans-serif; margin: 0; background: var(--bg); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        .header { height: 60px; background: rgba(255,255,255,0.85); backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; z-index: 100; border-bottom: 1px solid rgba(0,0,0,0.05); }
        .menu-toggle { display: none; font-size: 20px; cursor: pointer; margin-right: 15px; }
        .logo { font-weight: 800; font-size: 22px; color: var(--primary); font-style: italic; }
        
        .container { display: flex; flex: 1; overflow: hidden; position: relative; }
        
        .sidebar { width: 280px; background: #fff; border-right: 1px solid #eee; padding: 20px; overflow-y: auto; z-index: 200; transition: transform 0.3s; }
        .overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.3); z-index: 150; display: none; }
        
        .nav-l1 { padding: 12px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; justify-content: space-between; margin-bottom: 5px; color: var(--text); font-weight: 600; }
        .nav-l1.active { background: rgba(0,122,255,0.1); color: var(--primary); }
        .icon-box { width: 30px; height: 30px; border-radius: 8px; background: #eee; display: flex; align-items: center; justify-content: center; margin-right: 10px; font-size: 14px; }
        
        .l2-group { display: none; padding-left: 10px; margin-bottom: 10px; border-left: 2px solid #f0f0f0; margin-left: 15px; }
        .nav-l2 { display: block; padding: 8px 10px; font-size: 14px; color: #666; cursor: pointer; margin-bottom: 2px; }
        .nav-l2:hover { color: var(--primary); }
        
        .main-content { flex: 1; padding: 30px; overflow-y: auto; }
        .card { background: #fff; padding: 20px; border-radius: var(--radius); box-shadow: 0 5px 20px rgba(0,0,0,0.03); cursor: pointer; transition: 0.2s; border: 1px solid transparent; }
        .card:hover { transform: translateY(-3px); border-color: var(--primary); }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px; }
        
        @media (max-width: 900px) {
            .sidebar { position: fixed; top: 0; bottom: 0; left: 0; transform: translateX(-100%); }
            .sidebar.active { transform: translateX(0); }
            .menu-toggle { display: block; }
            .overlay.active { display: block; }
            .main-content { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>
    <header class="header">
        <div style="display:flex; align-items:center;">
            <div class="menu-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></div>
            <div class="logo">TP-Link</div>
        </div>
        <div><i class="fas fa-user-circle" style="font-size:24px; color:#999;"></i></div>
    </header>
    
    <div class="container">
        <aside class="sidebar" id="sidebar">
            <div class="nav-l1 active" onclick="navTo('Network Map', 'leaf', this)">
                <div style="display:flex; align-items:center;"><div class="icon-box" style="color:#007AFF; background:rgba(0,122,255,0.1)"><i class="fas fa-project-diagram"></i></div> Network Map</div>
            </div>
            <div class="nav-l1" onclick="navTo('WiFi', 'leaf', this)">
                <div style="display:flex; align-items:center;"><div class="icon-box" style="color:#AF52DE; background:rgba(175,82,222,0.1)"><i class="fas fa-wifi"></i></div> WiFi Settings</div>
            </div>
            
            <div class="nav-l1" onclick="toggleGroup('home')">
                <div style="display:flex; align-items:center;"><div class="icon-box" style="color:#FF9500; background:rgba(255,149,0,0.1)"><i class="fas fa-shield-alt"></i></div> HomeShield</div>
                <i class="fas fa-chevron-down" style="font-size:12px; color:#ccc;"></i>
            </div>
            <div class="l2-group" id="group-home">
                <div class="nav-l2" onclick="navTo('Security', 'leaf', this)">Security</div>
                <div class="nav-l2" onclick="navTo('Parental Control', 'leaf', this)">Parental Control</div>
            </div>
            
            <div class="nav-l1" onclick="toggleGroup('adv')">
                <div style="display:flex; align-items:center;"><div class="icon-box" style="color:#FF3B30; background:rgba(255,59,48,0.1)"><i class="fas fa-sliders-h"></i></div> Advanced</div>
                <i class="fas fa-chevron-down" style="font-size:12px; color:#ccc;"></i>
            </div>
            <div class="l2-group" id="group-adv">
                <div class="nav-l2" onclick="navTo('Access Control', 'leaf', this)">Access Control</div>
                <div class="nav-l2" onclick="navTo('System', 'menu', this)">System</div>
                <div class="nav-l2" onclick="navTo('VPN', 'leaf', this)">VPN Server</div>
            </div>
        </aside>
        
        <main class="main-content" id="content-area"></main>
    </div>

    <script>
        const MENUS = {
            "System": [ {t:"Reboot", d:"Restart device"}, {t:"Firmware", d:"Update software"}, {t:"Logs", d:"View events"} ]
        };

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
        }

        function toggleGroup(id) {
            const el = document.getElementById('group-'+id);
            el.style.display = el.style.display === 'block' ? 'none' : 'block';
        }

        function navTo(title, type, el) {
            // Highlight
            if(el) {
                document.querySelectorAll('.nav-l1, .nav-l2').forEach(e => e.classList.remove('active'));
                el.classList.add('active');
            }
            
            // Mobile close
            if(window.innerWidth <= 900) toggleSidebar();
            
            const container = document.getElementById('content-area');
            
            if(title === 'Network Map') {
                container.innerHTML = `
                    <h1 style="margin:0 0 20px;">Network Map</h1>
                    <div style="display:flex; gap:20px; flex-direction:column; align-items:center;">
                        <div style="width:200px; height:200px; border-radius:50%; border:4px solid #007AFF; display:flex; align-items:center; justify-content:center; flex-direction:column;">
                            <i class="fas fa-globe" style="font-size:40px; color:#007AFF; margin-bottom:10px;"></i>
                            <div style="font-weight:bold;">Internet</div>
                            <div style="color:#34C759; font-size:12px;">Connected</div>
                        </div>
                        <div style="height:50px; width:2px; background:#ddd;"></div>
                        <div class="card" style="width:100%; max-width:400px; text-align:center;">
                            <h3>TP-Link Router</h3>
                            <p>12 Clients Connected</p>
                        </div>
                    </div>
                `;
            } else if (type === 'menu' && MENUS[title]) {
                const items = MENUS[title].map(i => `
                    <div class="card" onclick="navTo('${i.t}', 'leaf')">
                        <h4 style="margin:0 0 5px;">${i.t}</h4>
                        <p style="margin:0; color:#888; font-size:13px;">${i.d}</p>
                    </div>
                `).join('');
                container.innerHTML = `
                    <h1 style="margin:0 0 10px;">${title}</h1>
                    <p style="color:#888; margin-bottom:30px;">Select a sub-feature</p>
                    <div class="grid">${items}</div>
                `;
            } else {
                container.innerHTML = `
                    <div style="margin-bottom:20px; cursor:pointer; color:#007AFF;" onclick="window.history.back()"><i class="fas fa-arrow-left"></i> Back</div>
                    <div class="config-view card">
                        <h2 style="margin-top:0">${title}</h2>
                        <div style="padding:20px 0; border-bottom:1px solid #eee; display:flex; justify-content:space-between;">
                            <span>Enable Function</span>
                            <i class="fas fa-toggle-on" style="color:#007AFF; font-size:24px;"></i>
                        </div>
                    </div>
                `;
            }
        }
        
        window.onload = function() { navTo('Network Map', 'leaf', document.querySelector('.nav-l1.active')); }
    </script>
</body>
</html>
    </textarea>

    <script>
        let currentScheme = '';

        function loadScheme(scheme) {
            const iframe = document.getElementById('demo-frame');
            const codeId = scheme === 'A' ? 'code-a' : 'code-b';
            
            // 使用 value 获取原始文本，避免 HTML 解析破坏代码结构
            const rawCode = document.getElementById(codeId).value;
            
            iframe.srcdoc = rawCode;
            
            currentScheme = scheme;
            document.getElementById('current-scheme-name').innerText = scheme;
            
            // 切换视图动画
            document.getElementById('landing-view').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('landing-view').style.display = 'none';
                document.getElementById('preview-view').classList.add('active');
            }, 400);
        }

        function closePreview() {
            const previewView = document.getElementById('preview-view');
            const landingView = document.getElementById('landing-view');
            
            previewView.classList.remove('active');
            
            setTimeout(() => {
                landingView.style.display = 'flex';
                requestAnimationFrame(() => { landingView.style.opacity = '1'; });
                // 清空 iframe
                document.getElementById('demo-frame').srcdoc = ''; 
            }, 400);
        }

        function switchScheme() {
            const nextScheme = currentScheme === 'A' ? 'B' : 'A';
            const iframe = document.getElementById('demo-frame');
            
            // 简单的淡出效果
            iframe.style.opacity = '0';
            setTimeout(() => {
                loadScheme(nextScheme);
                iframe.style.opacity = '1';
            }, 200);
        }
    </script>
</body>
</html>
